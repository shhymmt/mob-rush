# ボス戦計画

**作成日:** 2025-01-18
**ステータス:** ドラフト

## 概要

### 私が作りたいもの

参考画像（IMG_2381.jpg）を見ると、左側に巨大なボスがいてHP 1338と表示されている。これがゲームの目玉になりそう。

Phase 10では**ステージ終盤に登場するボス**を実装する。ハイパーカジュアルゲームなので、複雑なパターンは避けてシンプルに。

---

## ボス戦デザインの哲学

### ハイパーカジュアルの原則

ハイパーカジュアルゲームのボス戦で守るべき原則：

| 原則 | 説明 |
|------|------|
| **シンプル** | 3-5秒で理解できるメカニクス |
| **短い** | 30秒〜1分で決着 |
| **達成感** | 大きなHPバーが減っていく満足感 |
| **公平** | パターンは固定で予測可能 |

### ボスデザインパターン（検証済み）

ゲームデザインのベストプラクティスによると、ボスのパターンは2種類：

1. **Fixed Pattern** - 決まったパターンを繰り返す（予測可能）
2. **Random Pattern** - ランダムに攻撃を選択（難しい）

ハイパーカジュアルでは**Fixed Pattern**が適切。プレイヤーがパターンを覚えて上達できる。

---

## 目標のボスデザイン

### 参考: IMG_2381.jpg

参考画像のボス：
- 画面左側に固定表示
- 大きなHP表示（1338）
- ターゲットマーク付き
- 赤いレーザー/弾を撃ってくる

### 私のボスデザイン

| 要素 | 設計 |
|------|------|
| **位置** | 画面上部に固定（通常の敵より大きい） |
| **HP** | ステージレベル × 基本HP（例: Stage 3 = 150 HP） |
| **表示** | HPバー + 数値 |
| **攻撃** | 弾を撃ってくる（プレイヤーはレーン移動で回避） |
| **出現** | ステージ終盤（残り10秒くらい）に出現 |
| **倒し方** | 通常通り弾を当てる |
| **報酬** | 倒すとボーナスユニット or ステージクリア |

### ボスの攻撃パターン（固定）

```
Phase 1: "通常攻撃"
├── 3秒間隔で弾を1発撃つ
├── 弾はランダムなレーンに向かう
└── プレイヤーはレーン移動で回避

Phase 2: "激化" (HP 50%以下)
├── 2秒間隔で弾を2発撃つ（両レーン）
├── 片方のレーンだけ安全
└── タイミングを見て移動
```

シンプルに2フェーズ。プレイヤーが混乱しないように。

---

## 技術的アプローチ

### ボスアーキテクチャ

```
LaneBoss : MonoBehaviour
├── Health bossHealth
├── BossAttackPattern attackPattern
├── BossUI bossUI
│
├── Initialize(hp, pattern)
├── TakeDamage(amount)
├── StartAttackPattern()
├── OnDeath()
└── OnPhaseChange(phase)

BossSpawner : MonoBehaviour
├── SpawnBoss(stageNumber)
├── GetBossForStage(stage)
└── OnBossDefeated()

BossProjectile : MonoBehaviour
├── Initialize(targetLane, speed)
├── OnHitPlayer()
└── OnMissed()
```

### 既存システムとの統合

| システム | 統合方法 |
|----------|----------|
| **StageManager** | ステージ終盤にボススポーンをトリガー |
| **GameManager** | ボス撃破で勝利 or ボーナス |
| **Bullet** | 既存の弾システムでボスにダメージ |
| **PlayerUnitGroup** | ボス弾との衝突でダメージ/ゲームオーバー |
| **EffectManager** | ボス撃破時の大爆発エフェクト |
| **SoundManager** | ボス出現音、ボス撃破音 |

---

## 実装ステップ

### Phase 10A: ボス基盤

1. [ ] LaneBossコンポーネントを作成
2. [ ] ボスのビジュアルを作成（大きめの敵スプライト）
3. [ ] ボス用HPバーUIを追加
4. [ ] ボスを画面上部に配置
5. [ ] **テスト**: ボスが表示されHPが見える

### Phase 10B: ボスへのダメージ

1. [ ] 既存のBulletシステムと統合
2. [ ] ダメージでHPバーが更新
3. [ ] ボスへのヒットエフェクトを追加
4. [ ] ボス死亡で勝利またはボーナス
5. [ ] **テスト**: ボスを撃つとHPが減り、死亡が機能

### Phase 10C: ボスの攻撃パターン

1. [ ] BossProjectileを作成（プレイヤーに向かって下に移動）
2. [ ] Phase 1攻撃を実装（単発）
3. [ ] Phase 2攻撃を実装（HP 50%で2発同時）
4. [ ] プレイヤーがボス弾に当たるとダメージ/ゲームオーバー
5. [ ] **テスト**: ボスが撃ち、プレイヤーはレーン移動で回避可能

### Phase 10D: ボススポーン

1. [ ] BossSpawnerを作成
2. [ ] StageManagerと統合（ステージ終盤にスポーン）
3. [ ] ボス出現時は通常敵のスポーンを停止
4. [ ] ステージごとのボスHPを設定
5. [ ] **テスト**: 各ステージで正しいタイミングにボスがスポーン

### Phase 10E: ボスエフェクト＆サウンド

1. [ ] ボス登場エフェクト（画面揺れ、フラッシュ）
2. [ ] ボス死亡爆発（大きなエフェクト）
3. [ ] ボスBGM変更（オプション）
4. [ ] ボスサウンド（攻撃、被弾、死亡）
5. [ ] **テスト**: ボスがインパクトを感じる

---

## ステージごとのボス

| ステージ | ボスHP | 攻撃間隔 | 備考 |
|----------|--------|----------|------|
| 1 | 50 | 3秒 | チュートリアル、倒しやすい |
| 2 | 100 | 2.5秒 | 少し強い |
| 3 | 150 | 2秒 | 本格的 |
| 4+ | 150 + (stage-3)*50 | 1.5秒 | エンドレス用 |

---

## 私の懸念

### 難易度バランス

- ボスが強すぎるとフラストレーション
- 弱すぎると達成感がない
- ユニット数がボス到達時にどれくらいか次第

### 視覚的な明瞭さ

- ボスの弾とプレイヤーの弾を区別できるか
- ボスが大きすぎて画面を圧迫しないか
- HPバーが見やすいか

### パフォーマンス

- ボス + 大量の弾 + エフェクト = 負荷が心配
- ボス弾のプーリングが必要

---

## テスト計画

| テスト | 操作 | 期待結果 |
|--------|------|----------|
| ボス出現 | ステージ終盤まで待つ | ボスが画面上部に出現 |
| ボスHP表示 | ボスが出現 | HPバーが正しいHPを表示 |
| ボスにダメージ | ボスを撃つ | HPが減少、バーが更新 |
| ボス撃破 | HPを0にする | ボスが爆発、勝利 |
| ボス攻撃P1 | ボスが攻撃 | 単発の弾が発射 |
| ボス攻撃P2 | ボスのHPを50%に | 2発同時に発射 |
| 攻撃回避 | 攻撃時にレーン移動 | ダメージを回避 |
| 攻撃被弾 | 攻撃レーンに留まる | ゲームオーバーまたはユニット減少 |
| ステージ別ボス | 異なるステージをプレイ | ボスHPが異なる |

---

## 完了の定義

- [ ] ボスがステージ終盤に出現
- [ ] ボスにHPバーがあり視覚フィードバック
- [ ] プレイヤーの弾がボスにダメージ
- [ ] ボス死亡で勝利をトリガー
- [ ] ボスが弾を撃って攻撃
- [ ] プレイヤーはレーン移動で回避可能
- [ ] HP 50%でPhase 2が発動
- [ ] ボスHPがステージでスケール
- [ ] ボスエフェクトとサウンド（Phase 8-9完了時）

---

## 参照元

- [Boss Battle Design and Structure - Game Developer](https://www.gamedeveloper.com/design/boss-battle-design-and-structure)
- [The Evolution of Boss Designs in Video Games - Game Developer](https://www.gamedeveloper.com/design/the-evolution-of-boss-designs-in-video-games)
- [The Ultimate Guide to Hyper Casual Game Design - Moloco](https://www.moloco.com/blog/hyper-casual-games-design)
- [Top 10 Hyper-Casual Game Mechanics - EJAW](https://ejaw.net/top-10-hyper-casual-mechanics/)

---

*計画作成: 2025-01-18*
*ステータス: 承認待ち*
